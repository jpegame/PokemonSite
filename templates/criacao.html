<!DOCTYPE html>
<html>
<head>
  <style>
    canvas {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <button id="save-button">save</button>
  <script>
  const canvas = document.getElementById('canvas');
  const context = canvas.getContext('2d');
  let isDrawing = false;
  let lastX = 0;
  let lastY = 0;

  function startDrawing(event) {
    isDrawing = true;
    [lastX, lastY] = [event.offsetX, event.offsetY];
  }

  function draw(event) {
    if (!isDrawing) return;
    context.beginPath();
    context.moveTo(lastX, lastY);
    context.lineTo(event.offsetX, event.offsetY);
    context.stroke();
    [lastX, lastY] = [event.offsetX, event.offsetY];
  }

  function stopDrawing() {
    isDrawing = false;
  }

  function saveDrawing() {
    const dataURL = canvas.toDataURL();
    //const link = document.createElement('a');
    // link.download = 'drawing.txt';
    // link.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(dataURL);
    // const base64String = "data:image/png;base64,iVBORw0KG...";
    const img = new Image();
    img.src = dataURL;//base64String;
    document.body.appendChild(img);
    context.clearRect(0, 0, canvas.width, canvas.height);
    //link.click();
  }

  canvas.addEventListener('mousedown', startDrawing);
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('mouseup', stopDrawing);
  canvas.addEventListener('mouseout', stopDrawing);

  document.getElementById('save-button').addEventListener('click', saveDrawing);

  </script>
</body>
</html>